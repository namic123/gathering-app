spring:
  # === 데이터베이스 연결 설정 ===
  # Docker로 띄운 PostgreSQL에 연결
  datasource:
    url: jdbc:postgresql://localhost:15432/moim
    username: moim
    password: moim1234

  # === JPA(Hibernate) 설정 ===
  jpa:
    hibernate:
      # validate: 엔티티와 실제 DB 스키마가 일치하는지 검증만 함
      # create나 update를 쓰면 Hibernate가 임의로 테이블을 바꿔서 위험
      # 스키마 변경은 반드시 Flyway 마이그레이션으로만 관리
      ddl-auto: validate
    properties:
      hibernate:
        # PostgreSQL 전용 SQL 문법을 생성하도록 명시
        dialect: org.hibernate.dialect.PostgreSQLDialect
    # open-in-view: true면 Controller까지 DB 세션이 열려 있어서
    # 의도치 않은 lazy loading + 성능 문제 발생
    # false로 꺼서 Service 레이어에서만 DB 접근하도록 강제
    open-in-view: false

  # === Flyway 설정 ===
  # SQL 마이그레이션 파일 위치 지정
  # V1__init_schema.sql 같은 파일을 자동으로 찾아서 실행
  flyway:
    enabled: true
    locations: classpath:db/migration

# === 서버 포트 ===
server:
  port: 8080